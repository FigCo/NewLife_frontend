!function(a){function c(){a(".crf-sm.opened").length&&(a(".crf-s.opened").removeClass("opened"),a(".crf-sm.opened").removeClass("opened").hide(),b.close.call())}a.fn.crfi=function(){this.change(function(){"radio"==a(this).attr("type")&&a("input[name="+a(this).attr("name")+"]").not(this).next(".crf").removeClass("checked"),a(this).prop("checked")?a(this).next().addClass("checked"):a(this).next().removeClass("checked")}),this.not(".crf-i").each(function(b){a(this).attr("id","crf-input-"+b).css({position:"absolute",left:"-9999em"}).addClass("crf-i").next("label").addClass("crf").attr("for","crf-input-"+b),a(this).prop("checked")&&a(this).next().addClass("checked")})};var b,d={init:function(d){b=a.extend({select:function(){},done:function(){},open:function(){},close:function(){}},d),a(document).unbind("click.crfs").on("click.crfs",".crf-s",function(){var d=a("div[data-id="+a(this).attr("id")+"]");if(d.is(":visible"))return c(),!1;c();var e=a(this).outerHeight(),f=a(this).find("select").attr("class"),g=a(this).offset(),h=d.show().height();d.css({position:"absolute",left:"-9999em"}),a(this).addClass("opened"),d.addClass("opened "+f).css({left:g.left,top:g.top+e+h>a(document).height()?g.top-h:g.top+e,width:a(this).outerWidth()}).show(),b.open.call()}),a(document).click(function(b){return a(b.target).closest(".crf-sm.opened, .crf-s.opened").length>0?!1:(c(),void 0)}),a(window).resize(function(){var b=a(".crf-s.opened");if(b.length){var c=a(".crf-sm.opened"),d=b.outerHeight(),e=b.offset(),f=c.height();c.css({left:e.left,top:e.top+d+f>a(document).height()?e.top-f:e.top+d,width:b.outerWidth()})}}),a(document).on("click.crfs",".crf-sm li",function(){var d=a(this).parentsUntil(".crf-sm").parent().attr("data-id"),e=a("#"+d).attr("class");return a("#"+d).attr("class","crf-s").addClass(a(this).attr("class").replace("selected","")).addClass(e.replace("hided-s","").replace("opened","")).find(".option").text(a(this).text()),a("#"+d).find("select").children().prop("selected",!1).eq(a(this).index()).prop("selected",!0).change(),a(this).parentsUntil(".crf-sm").parent().find(".selected").removeClass("selected"),a(this).addClass("selected"),c(),b.select.call(),!1}),this.not(".hided-s").each(function(c){a(this).addClass("hided-s").hide().wrap("<span class='crf-s "+a(this).attr("class")+"' id='crf-s-"+c+"' />").parent().append("<span class='option'>"+a(this).find("option:selected").text()+"</span>");var d=a("<ul></ul>");a(this).children().each(function(){d.append("<li class='"+(void 0!=a(this).attr("class")?a(this).attr("class")+"":"")+(a(this).is(":selected")?" selected":"")+"'><span class='link'>"+a(this).text()+"</span></li>")}),a("<div class='crf-sm' data-id='crf-s-"+c+"'/>").append(d).appendTo("body"),b.done.call()})},hide:function(){c()}};a.fn.crfs=function(a){return d[a]?d[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:d.init.apply(this,arguments)}}(jQuery);
