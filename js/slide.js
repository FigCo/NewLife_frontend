
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+ days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+ options.expires.toUTCString():'',options.path?'; path='+ options.path:'',options.domain?'; domain='+ options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+ b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t- 2)+ b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+ b;return-c/2*((--t)*(t- 2)- 1)+ b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+ b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d- 1)*t*t+ 1)+ b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+ b;return c/2*((t-=2)*t*t+ 2)+ b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+ b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d- 1)*t*t*t- 1)+ b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+ b;return-c/2*((t-=2)*t*t*t- 2)+ b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+ b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d- 1)*t*t*t*t+ 1)+ b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+ b;return c/2*((t-=2)*t*t*t*t+ 2)+ b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+ c+ b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+ b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)- 1)+ b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d- 1))+ b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+ c:c*(-Math.pow(2,-10*t/d)+ 1)+ b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+ c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t- 1))+ b;return c/2*(-Math.pow(2,-10*--t)+ 2)+ b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)- 1)+ b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d- 1)*t)+ b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1- t*t)- 1)+ b;return c/2*(Math.sqrt(1-(t-=2)*t)+ 1)+ b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+ c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d- s)*(2*Math.PI)/p))+ b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+ c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d- s)*(2*Math.PI)/p)+ c+ b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+ c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d- s)*(2*Math.PI)/p))+ b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d- s)*(2*Math.PI)/p)*.5+ c+ b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+ 1)*t- s)+ b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d- 1)*t*((s+ 1)*t+ s)+ 1)+ b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+ 1)*t- s))+ b;return c/2*((t-=2)*t*(((s*=(1.525))+ 1)*t+ s)+ 2)+ b;},easeInBounce:function(x,t,b,c,d){return c- jQuery.easing.easeOutBounce(x,d- t,0,c,d)+ b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+ b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+ b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+ b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+ b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+ b;return jQuery.easing.easeOutBounce(x,t*2- d,0,c,d)*.5+ c*.5+ b;}});jQuery.extend(jQuery.easing,{easeIn:function(x,t,b,c,d){return jQuery.easing.easeInQuad(x,t,b,c,d);},easeOut:function(x,t,b,c,d){return jQuery.easing.easeOutQuad(x,t,b,c,d);},easeInOut:function(x,t,b,c,d){return jQuery.easing.easeInOutQuad(x,t,b,c,d);},expoin:function(x,t,b,c,d){return jQuery.easing.easeInExpo(x,t,b,c,d);},expoout:function(x,t,b,c,d){return jQuery.easing.easeOutExpo(x,t,b,c,d);},expoinout:function(x,t,b,c,d){return jQuery.easing.easeInOutExpo(x,t,b,c,d);},bouncein:function(x,t,b,c,d){return jQuery.easing.easeInBounce(x,t,b,c,d);},bounceout:function(x,t,b,c,d){return jQuery.easing.easeOutBounce(x,t,b,c,d);},bounceinout:function(x,t,b,c,d){return jQuery.easing.easeInOutBounce(x,t,b,c,d);},elasin:function(x,t,b,c,d){return jQuery.easing.easeInElastic(x,t,b,c,d);},elasout:function(x,t,b,c,d){return jQuery.easing.easeOutElastic(x,t,b,c,d);},elasinout:function(x,t,b,c,d){return jQuery.easing.easeInOutElastic(x,t,b,c,d);},backin:function(x,t,b,c,d){return jQuery.easing.easeInBack(x,t,b,c,d);},backout:function(x,t,b,c,d){return jQuery.easing.easeOutBack(x,t,b,c,d);},backinout:function(x,t,b,c,d){return jQuery.easing.easeInOutBack(x,t,b,c,d);}});(function($){$.prettyPhoto={version:'3.1.5'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({hook:'rel',animation_speed:'fast',ajaxcallback:function(){},slideshow:5000,autoplay_slideshow:false,opacity:0.80,show_title:true,allow_resize:true,allow_expand:true,default_width:500,default_height:344,counter_separator_label:'/',theme:'pp_default',horizontal_padding:20,hideflash:false,wmode:'opaque',autoplay:true,modal:false,deeplinking:true,overlay_gallery:true,overlay_gallery_max:30,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> \
						<div class="ppt">&nbsp;</div> \
						<div class="pp_top"> \
							<div class="pp_left"></div> \
							<div class="pp_middle"></div> \
							<div class="pp_right"></div> \
						</div> \
						<div class="pp_content_container"> \
							<div class="pp_left"> \
							<div class="pp_right"> \
								<div class="pp_content"> \
									<div class="pp_loaderIcon"></div> \
									<div class="pp_fade"> \
										<a href="#" class="pp_expand" title="Expand the image">Expand</a> \
										<div class="pp_hoverContainer"> \
											<a class="pp_next" href="#">next</a> \
											<a class="pp_previous" href="#">previous</a> \
										</div> \
										<a class="pp_close" href="#">Close</a> \
                                        <div id="pp_full_res"></div> \
										<div class="pp_details"> \
											<div class="pp_nav"> \
												<a href="#" class="pp_arrow_previous">Previous</a> \
												<p class="currentTextHolder">0/0</p> \
												<a href="#" class="pp_arrow_next">Next</a> \
											</div> \
											<p class="pp_description"></p> \
											<div class="pp_social">{pp_social}</div> \
										</div> \
									</div> \
								</div> \
							</div> \
							</div> \
						</div> \
						<div class="pp_bottom"> \
							<div class="pp_left"></div> \
							<div class="pp_middle"></div> \
							<div class="pp_right"></div> \
						</div> \
					</div> \
					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \
								<a href="#" class="pp_arrow_previous">Previous</a> \
								<div> \
									<ul> \
										{gallery} \
									</ul> \
								</div> \
								<a href="#" class="pp_arrow_next">Next</a> \
							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:'',social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},pp_settings);var matchedObjects=this,percentBased=false,pp_dimensions,pp_open,pp_contentHeight,pp_contentWidth,pp_containerHeight,pp_containerWidth,windowHeight=$(window).height(),windowWidth=$(window).width(),pp_slideshow;doresize=true,scroll_pos=_get_scroll();$(window).unbind('resize.prettyphoto').bind('resize.prettyphoto',function(){_center_overlay();_resize_overlay();});if(pp_settings.keyboard_shortcuts){$(document).unbind('keydown.prettyphoto').bind('keydown.prettyphoto',function(e){if(typeof $pp_pic_holder!='undefined'){if($pp_pic_holder.is(':visible')){switch(e.keyCode){case 37:$.prettyPhoto.changePage('previous');e.preventDefault();break;case 39:$.prettyPhoto.changePage('next');e.preventDefault();break;case 27:if(!settings.modal)
$.prettyPhoto.close();e.preventDefault();break;};};};});};$.prettyPhoto.initialize=function(){settings=pp_settings;if(settings.theme=='pp_default')settings.horizontal_padding=16;theRel=$(this).attr(settings.hook);galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return $(n).attr('href');}):$.makeArray($(this).attr('href'));pp_titles=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return($(n).find('img').attr('alt'))?$(n).find('img').attr('alt'):"";}):$.makeArray($(this).find('img').attr('alt'));pp_descriptions=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return($(n).attr('title'))?$(n).attr('title'):"";}):$.makeArray($(this).attr('title'));if(pp_images.length>settings.overlay_gallery_max)settings.overlay_gallery=false;set_position=jQuery.inArray($(this).attr('href'),pp_images);rel_index=(isSet)?set_position:$("a["+ settings.hook+"^='"+ theRel+"']").index($(this));_build_overlay(this);if(settings.allow_resize)
$(window).bind('scroll.prettyphoto',function(){_center_overlay();});$.prettyPhoto.open();return false;}
$.prettyPhoto.open=function(event){if(typeof settings=="undefined"){settings=pp_settings;pp_images=$.makeArray(arguments[0]);pp_titles=(arguments[1])?$.makeArray(arguments[1]):$.makeArray("");pp_descriptions=(arguments[2])?$.makeArray(arguments[2]):$.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=(arguments[3])?arguments[3]:0;_build_overlay(event.target);}
if(settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','hidden');_checkPosition($(pp_images).size());$('.pp_loaderIcon').show();if(settings.deeplinking)
setHashtag();if(settings.social_tools){facebook_like_link=settings.social_tools.replace('{location_href}',encodeURIComponent(location.href));$pp_pic_holder.find('.pp_social').html(facebook_like_link);}
if($ppt.is(':hidden'))$ppt.css('opacity',0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find('.currentTextHolder').text((set_position+ 1)+ settings.counter_separator_label+ $(pp_images).size());if(typeof pp_descriptions[set_position]!='undefined'&&pp_descriptions[set_position]!=""){$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));}else{$pp_pic_holder.find('.pp_description').hide();}
movie_width=(parseFloat(getParam('width',pp_images[set_position])))?getParam('width',pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(getParam('height',pp_images[set_position])))?getParam('height',pp_images[set_position]):settings.default_height.toString();percentBased=false;if(movie_height.indexOf('%')!=-1){movie_height=parseFloat(($(window).height()*parseFloat(movie_height)/100)- 150);percentBased=true;}
if(movie_width.indexOf('%')!=-1){movie_width=parseFloat(($(window).width()*parseFloat(movie_width)/100)- 150);percentBased=true;}
$pp_pic_holder.fadeIn(function(){(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html('&nbsp;');imgPreloader="";skipInjection=false;switch(_getFileType(pp_images[set_position])){case'image':imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position<$(pp_images).size()- 1)nextImage.src=pp_images[set_position+ 1];prevImage=new Image();if(isSet&&pp_images[set_position- 1])prevImage.src=pp_images[set_position- 1];$pp_pic_holder.find('#pp_full_res')[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){pp_dimensions=_fitToViewport(imgPreloader.width,imgPreloader.height);_showContent();};imgPreloader.onerror=function(){alert('Image cannot be loaded. Make sure the path is correct and image exist.');$.prettyPhoto.close();};imgPreloader.src=pp_images[set_position];break;case'youtube':pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=getParam('v',pp_images[set_position]);if(movie_id==""){movie_id=pp_images[set_position].split('youtu.be/');movie_id=movie_id[1];if(movie_id.indexOf('?')>0)
movie_id=movie_id.substr(0,movie_id.indexOf('?'));if(movie_id.indexOf('&')>0)
movie_id=movie_id.substr(0,movie_id.indexOf('&'));}
movie='http://www.youtube.com/embed/'+ movie_id;(getParam('rel',pp_images[set_position]))?movie+="?rel="+ getParam('rel',pp_images[set_position]):movie+="?rel=1";if(settings.autoplay)movie+="&autoplay=1";toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case'vimeo':pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=pp_images[set_position];var regExp=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/;var match=movie_id.match(regExp);movie='http://player.vimeo.com/video/'+ match[3]+'?title=0&amp;byline=0&amp;portrait=0';if(settings.autoplay)movie+="&autoplay=1;";vimeo_width=pp_dimensions['width']+'/embed/?moog_width='+ pp_dimensions['width'];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,movie);break;case'quicktime':pp_dimensions=_fitToViewport(movie_width,movie_height);pp_dimensions['height']+=15;pp_dimensions['contentHeight']+=15;pp_dimensions['containerHeight']+=15;toInject=settings.quicktime_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case'flash':pp_dimensions=_fitToViewport(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf('flashvars')+ 10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf('?'));toInject=settings.flash_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+'?'+ flash_vars);break;case'iframe':pp_dimensions=_fitToViewport(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf('iframe')- 1);toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,frame_url);break;case'ajax':doresize=false;pp_dimensions=_fitToViewport(movie_width,movie_height);doresize=true;skipInjection=true;$.get(pp_images[set_position],function(responseHTML){toInject=settings.inline_markup.replace(/{content}/g,responseHTML);$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();});break;case'custom':pp_dimensions=_fitToViewport(movie_width,movie_height);toInject=settings.custom_markup;break;case'inline':myClone=$(pp_images[set_position]).clone().append('<br clear="all" />').css({'width':settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($('body')).show();doresize=false;pp_dimensions=_fitToViewport($(myClone).width(),$(myClone).height());doresize=true;$(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());break;};if(!imgPreloader&&!skipInjection){$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();};});return false;};$.prettyPhoto.changePage=function(direction){currentGalleryPage=0;if(direction=='previous'){set_position--;if(set_position<0)set_position=$(pp_images).size()- 1;}else if(direction=='next'){set_position++;if(set_position>$(pp_images).size()- 1)set_position=0;}else{set_position=direction;};rel_index=set_position;if(!doresize)doresize=true;if(settings.allow_expand){$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');}
_hideContent(function(){$.prettyPhoto.open();});};$.prettyPhoto.changeGalleryPage=function(direction){if(direction=='next'){currentGalleryPage++;if(currentGalleryPage>totalPage)currentGalleryPage=0;}else if(direction=='previous'){currentGalleryPage--;if(currentGalleryPage<0)currentGalleryPage=totalPage;}else{currentGalleryPage=direction;};slide_speed=(direction=='next'||direction=='previous')?settings.animation_speed:0;slide_to=currentGalleryPage*(itemsPerPage*itemWidth);$pp_gallery.find('ul').animate({left:-slide_to},slide_speed);};$.prettyPhoto.startSlideshow=function(){if(typeof pp_slideshow=='undefined'){$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function(){$.prettyPhoto.stopSlideshow();return false;});pp_slideshow=setInterval($.prettyPhoto.startSlideshow,settings.slideshow);}else{$.prettyPhoto.changePage('next');};}
$.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});clearInterval(pp_slideshow);pp_slideshow=undefined;}
$.prettyPhoto.close=function(){if($pp_overlay.is(":animated"))return;$.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find('object,embed').css('visibility','hidden');$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed,function(){$(this).remove();});$pp_overlay.fadeOut(settings.animation_speed,function(){if(settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','visible');$(this).remove();$(window).unbind('scroll.prettyphoto');clearHashtag();settings.callback();doresize=true;pp_open=false;delete settings;});};function _showContent(){$('.pp_loaderIcon').hide();projectedTop=scroll_pos['scrollTop']+((windowHeight/2)-(pp_dimensions['containerHeight']/2));if(projectedTop<0)projectedTop=0;$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find('.pp_content').animate({height:pp_dimensions['contentHeight'],width:pp_dimensions['contentWidth']},settings.animation_speed);$pp_pic_holder.animate({'top':projectedTop,'left':((windowWidth/2)-(pp_dimensions['containerWidth']/2)<0)?0:(windowWidth/2)-(pp_dimensions['containerWidth']/2),width:pp_dimensions['containerWidth']},settings.animation_speed,function(){$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(pp_dimensions['height']).width(pp_dimensions['width']);$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed);if(isSet&&_getFileType(pp_images[set_position])=="image"){$pp_pic_holder.find('.pp_hoverContainer').show();}else{$pp_pic_holder.find('.pp_hoverContainer').hide();}
if(settings.allow_expand){if(pp_dimensions['resized']){$('a.pp_expand,a.pp_contract').show();}else{$('a.pp_expand').hide();}}
if(settings.autoplay_slideshow&&!pp_slideshow&&!pp_open)$.prettyPhoto.startSlideshow();settings.changepicturecallback();pp_open=true;});_insert_gallery();pp_settings.ajaxcallback();};function _hideContent(callback){$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility','hidden');$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed,function(){$('.pp_loaderIcon').show();callback();});};function _checkPosition(setCount){(setCount>1)?$('.pp_nav').show():$('.pp_nav').hide();};function _fitToViewport(width,height){resized=false;_getDimensions(width,height);imageWidth=width,imageHeight=height;if(((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight))&&doresize&&settings.allow_resize&&!percentBased){resized=true,fitting=false;while(!fitting){if((pp_containerWidth>windowWidth)){imageWidth=(windowWidth- 200);imageHeight=(height/width)*imageWidth;}else if((pp_containerHeight>windowHeight)){imageHeight=(windowHeight- 200);imageWidth=(width/height)*imageHeight;}else{fitting=true;};pp_containerHeight=imageHeight,pp_containerWidth=imageWidth;};if((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight)){_fitToViewport(pp_containerWidth,pp_containerHeight)};_getDimensions(imageWidth,imageHeight);};return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(pp_containerHeight),containerWidth:Math.floor(pp_containerWidth)+(settings.horizontal_padding*2),contentHeight:Math.floor(pp_contentHeight),contentWidth:Math.floor(pp_contentWidth),resized:resized};};function _getDimensions(width,height){width=parseFloat(width);height=parseFloat(height);$pp_details=$pp_pic_holder.find('.pp_details');$pp_details.width(width);detailsHeight=parseFloat($pp_details.css('marginTop'))+ parseFloat($pp_details.css('marginBottom'));$pp_details=$pp_details.clone().addClass(settings.theme).width(width).appendTo($('body')).css({'position':'absolute','top':-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;$pp_details.remove();$pp_title=$pp_pic_holder.find('.ppt');$pp_title.width(width);titleHeight=parseFloat($pp_title.css('marginTop'))+ parseFloat($pp_title.css('marginBottom'));$pp_title=$pp_title.clone().appendTo($('body')).css({'position':'absolute','top':-10000});titleHeight+=$pp_title.height();$pp_title.remove();pp_contentHeight=height+ detailsHeight;pp_contentWidth=width;pp_containerHeight=pp_contentHeight+ titleHeight+ $pp_pic_holder.find('.pp_top').height()+ $pp_pic_holder.find('.pp_bottom').height();pp_containerWidth=width;}
function _getFileType(itemSrc){if(itemSrc.match(/youtube\.com\/watch/i)||itemSrc.match(/youtu\.be/i)){return'youtube';}else if(itemSrc.match(/vimeo\.com/i)){return'vimeo';}else if(itemSrc.match(/\b.mov\b/i)){return'quicktime';}else if(itemSrc.match(/\b.swf\b/i)){return'flash';}else if(itemSrc.match(/\biframe=true\b/i)){return'iframe';}else if(itemSrc.match(/\bajax=true\b/i)){return'ajax';}else if(itemSrc.match(/\bcustom=true\b/i)){return'custom';}else if(itemSrc.substr(0,1)=='#'){return'inline';}else{return'image';};};function _center_overlay(){if(doresize&&typeof $pp_pic_holder!='undefined'){scroll_pos=_get_scroll();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(windowHeight/2)+ scroll_pos['scrollTop']-(contentHeight/2);if(projectedTop<0)projectedTop=0;if(contentHeight>windowHeight)
return;$pp_pic_holder.css({'top':projectedTop,'left':(windowWidth/2)+ scroll_pos['scrollLeft']-(contentwidth/2)});};};function _get_scroll(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};}else if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};}else if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft};};};function _resize_overlay(){windowHeight=$(window).height(),windowWidth=$(window).width();if(typeof $pp_overlay!="undefined")$pp_overlay.height($(document).height()).width(windowWidth);};function _insert_gallery(){if(isSet&&settings.overlay_gallery&&_getFileType(pp_images[set_position])=="image"){itemWidth=52+ 5;navWidth=(settings.theme=="facebook"||settings.theme=="pp_default")?50:30;itemsPerPage=Math.floor((pp_dimensions['containerWidth']- 100- navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)- 1;if(totalPage==0){navWidth=0;$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').hide();}else{$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').show();};galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css('margin-left',-((galleryWidth/2)+(navWidth/2))).find('div:first').width(galleryWidth+ 5).find('ul').width(fullGalleryWidth).find('li.selected').removeClass('selected');goToPage=(Math.floor(set_position/itemsPerPage)<totalPage)?Math.floor(set_position/itemsPerPage):totalPage;$.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(':eq('+ set_position+')').addClass('selected');}else{$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');}}
function _build_overlay(caller){if(settings.social_tools)
facebook_like_link=settings.social_tools.replace('{location_href}',encodeURIComponent(location.href));settings.markup=settings.markup.replace('{pp_social}','');$('body').append(settings.markup);$pp_pic_holder=$('.pp_pic_holder'),$ppt=$('.ppt'),$pp_overlay=$('div.pp_overlay');if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var i=0;i<pp_images.length;i++){if(!pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname='default';img_src='';}else{classname='';img_src=pp_images[i];}
toInject+="<li class='"+ classname+"'><a href='#'><img src='"+ img_src+"' width='50' alt='' /></a></li>";};toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find('#pp_full_res').after(toInject);$pp_gallery=$('.pp_pic_holder .pp_gallery'),$pp_gallery_li=$pp_gallery.find('li');$pp_gallery.find('.pp_arrow_next').click(function(){$.prettyPhoto.changeGalleryPage('next');$.prettyPhoto.stopSlideshow();return false;});$pp_gallery.find('.pp_arrow_previous').click(function(){$.prettyPhoto.changeGalleryPage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_content').hover(function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();},function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();});itemWidth=52+ 5;$pp_gallery_li.each(function(i){$(this).find('a').click(function(){$.prettyPhoto.changePage(i);$.prettyPhoto.stopSlideshow();return false;});});};if(settings.slideshow){$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>')
$pp_pic_holder.find('.pp_nav .pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});}
$pp_pic_holder.attr('class','pp_pic_holder '+ settings.theme);$pp_overlay.css({'opacity':0,'height':$(document).height(),'width':$(window).width()}).bind('click',function(){if(!settings.modal)$.prettyPhoto.close();});$('a.pp_close').bind('click',function(){$.prettyPhoto.close();return false;});if(settings.allow_expand){$('a.pp_expand').bind('click',function(e){if($(this).hasClass('pp_expand')){$(this).removeClass('pp_expand').addClass('pp_contract');doresize=false;}else{$(this).removeClass('pp_contract').addClass('pp_expand');doresize=true;};_hideContent(function(){$.prettyPhoto.open();});return false;});}
$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click',function(){$.prettyPhoto.changePage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click',function(){$.prettyPhoto.changePage('next');$.prettyPhoto.stopSlideshow();return false;});_center_overlay();};if(!pp_alreadyInitialized&&getHashtag()){pp_alreadyInitialized=true;hashIndex=getHashtag();hashRel=hashIndex;hashIndex=hashIndex.substring(hashIndex.indexOf('/')+ 1,hashIndex.length- 1);hashRel=hashRel.substring(0,hashRel.indexOf('/'));setTimeout(function(){$("a["+ pp_settings.hook+"^='"+ hashRel+"']:eq("+ hashIndex+")").trigger('click');},50);}
return this.unbind('click.prettyphoto').bind('click.prettyphoto',$.prettyPhoto.initialize);};function getHashtag(){var url=location.href;hashtag=(url.indexOf('#prettyPhoto')!==-1)?decodeURI(url.substring(url.indexOf('#prettyPhoto')+ 1,url.length)):false;return hashtag;};function setHashtag(){if(typeof theRel=='undefined')return;location.hash=theRel+'/'+ rel_index+'/';};function clearHashtag(){if(location.href.indexOf('#prettyPhoto')!==-1)location.hash="prettyPhoto";}
function getParam(name,url){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+ name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return(results==null)?"":results[1];}})(jQuery);var pp_alreadyInitialized=false;function trackOutboundLink(link,category,action){try{_gaq.push(['_trackEvent',category,action]);}catch(err){}
setTimeout(function(){document.location.href=link.href;},100);}
(function($){$.fn.removeStyle=function(style){var search=new RegExp(style+'[^;]+;?','g');return this.each(function(){$(this).attr('style',function(i,style){return style.replace(search,'');});});};}(jQuery));function searchInput(){if($(window).width()>800){$('#searchBox input#searchBar').focus(function(){$mySubmit=$('#searchBox input.submit');$mySubmit.fadeIn();$(this).attr('data-default',$(this).width());$(this).animate({width:250},'slow');}).blur(function(){$mySubmit.fadeOut();var w=$(this).attr('data-default');$(this).animate({width:w},'slow');});}}
function menuIndicator(){$("nav#tl-nav").prepend('<div id="menu-indicator"></div>');var select=$("nav ul#nav li.selected");if(select.length>0){var offset=select.position();var width=select.outerWidth(true);var centerX=offset.left+ width/2;var myPos=centerX- 8;$("div#menu-indicator").css("left",myPos);var $currentpos=$("#menu-indicator").css("left");$("#menu-indicator").data('storedpos',$currentpos);$("nav ul#nav > li").mouseenter(function(){var $that=$(this);var newOffset=$that.position();var newWidth=$that.outerWidth(true);var newCenterX=newOffset.left+ newWidth/2;var newPos=newCenterX- 8;$("#menu-indicator").stop().animate({left:newPos},1000,'easeInOutQuint');}).mouseleave(function(){$("#menu-indicator").stop().animate({left:$currentpos},1000,'easeInOutQuint');});}}
function shareHover(){$("ul#shareButtons > li img").hover(function(){$(this).stop().animate({"opacity":"0.6"},"slow");},function(){$(this).stop().animate({"opacity":"1"},"slow");});}
function mobileNavShowHide(){$('div.navigation a.open-menu').click(function(){$(this).toggleClass('close-menu');$('ul#nav').toggle();return false;});}
function overlays(){var $windowWidth=$(window).width();if($windowWidth>583){$("a[data-rel^='prettyPhoto']").prettyPhoto({animation_speed:'normal',show_title:false,social_tools:false,deeplinking:false,default_width:540,default_height:660,allow_resize:false,modal:true,iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"  scrolling="no"></iframe>',});}}
function closeFormOverlay(redirectUrl){try{$.prettyPhoto.close();}
catch(error){}
window.location.replace(redirectUrl);}
$(document).ready(function(){$("body").addClass("hasjs");searchInput();shareHover();mobileNavShowHide();overlays();$("a[href^='http:'],a[href^='https:']").not("[href*='"+ document.domain+"']").attr('target','_blank');});$(window).load(function(){menuIndicator();});function Validation(){var elements=$('.error');$.each(elements,function(index,item){$(item).removeClass('error');});var errors=false;var name=$('#name');var nameErrorMessage=$("#nameerror");nameErrorMessage.hide();var tel=$('#telephone');var telErrorMessage=$("#telephoneerror");telErrorMessage.hide();if(!name.val()){errors=true;name.addClass('error');nameErrorMessage.show();}
if(!tel.val()){errors=true;tel.addClass('error');telErrorMessage.show();}
if(!checkUKTelephone(tel.val())){errors=true;tel.addClass('error');telErrorMessage.show();telErrorMessage.text(telNumberErrors[telNumberErrorNo]);}
if(!errors){$.blockUI({message:'<div class="blockui"><h2>Thank you for your patience<br/> your request is being processed...</h2></div>',css:{backgroundColor:'transparent',color:'#fff',border:'none'}});return true;}
return false;};function ValidationQuestionnaire(questionnaireType){var elements=$('.error');$.each(elements,function(index,item){$(item).removeClass('error');});var errors=false;var email=$('#email');var emailErrorMessage=$("#emaileerror");emailErrorMessage.hide();if(!email.val()){errors=true;email.addClass('error');emailErrorMessage.show();}
if(!errors){setTimeout(function(){_gaq.push(['_trackEvent','Questionnaire: '+questionnaireType,"Done"]);},250);$.blockUI({message:'<div class="blockui"><h2>Thank you for your patience<br/> your request is being processed...</h2></div>',css:{backgroundColor:'transparent',color:'#fff',border:'none'}});return true;}
return false;};$("[id*=Referbut_Submit]").click(function(){var studentName=$("#studentname");var parentName=$("#parentname");var notesText="REFERER \n GIVE 20% Off to Lead and to exsiting customer. \n Customer Details \n Student name : "+ studentName.val()+" \n Parent Name : "+ parentName.val();var notes=$("#notes");notes.val(notesText);});function isNumber(evt){evt=(evt)?evt:window.event;var charCode=(evt.which)?evt.which:evt.keyCode;if(charCode>31&&(charCode<48||charCode>57)&&(charCode!=43)){return false;}
return true;}
function ReferValidation(){var elements=$('.error');$.each(elements,function(index,item){$(item).removeClass('error');});var errors=false;var name=$('#name');var nameErrorMessage=$("#nameerror");nameErrorMessage.hide();var email=$('#email');var emilaErrorMessage=$("#emailerror");emilaErrorMessage.hide();var tel=$('#telephone');var telErrorMessage=$("#telephoneerror");telErrorMessage.hide();var studentName=$("#studentname");var studentNameErrorMessage=$("#studentnameerror");studentNameErrorMessage.hide();var parentName=$("#parentname");var parentNameErrorMessage=$("#parentnameerror");parentNameErrorMessage.hide();var notesText="REFERER: GIVE 20% Off, Student name : "+ studentName.val()+" and Parent Name : "+ parentName.val();var notes=$("#notes");notes.val(notesText);if(!name.val()){errors=true;name.addClass('error');nameErrorMessage.show();}
if(!tel.val()){errors=true;tel.addClass('error');telErrorMessage.show();}
if(!email.val()){errors=true;email.addClass('error');emilaErrorMessage.show();}
if(!studentName.val()){errors=true;studentName.addClass('error');studentNameErrorMessage.show();}
if(!parentName.val()){errors=true;parentName.addClass('error');parentNameErrorMessage.show();}
if(!errors){$.blockUI({message:'<div class="blockui"><h2>Thank you for your patience<br/> your request is being processed...</h2><br/><img src="/images/ajax-loader.gif" /></div>',css:{backgroundColor:'transparent',color:'#fff',border:'none'}});return true;}
return false;};function ValidationInternational()
{var elements=$('.error');$.each(elements,function(index,item){$(item).removeClass('error');});var errors=false;var name=$('#name');var nameErrorMessage=$("#nameerror");nameErrorMessage.hide();var tel=$('#telephone');var telErrorMessage=$("#telephoneerror");telErrorMessage.hide();if(!name.val()){errors=true;name.addClass('error');nameErrorMessage.show();}
if(!tel.val()){errors=true;tel.addClass('error');telErrorMessage.show();}
if(!errors){$.blockUI({message:'<div class="blockui"><h2>Thank you for your patience<br/> your request is being processed...</h2></div>',css:{backgroundColor:'transparent',color:'#fff',border:'none'}});return true;}
return false;}
function ValidationWithEmail(){var elements=$('.error');$.each(elements,function(index,item){$(item).removeClass('error');});var errors=false;var name=$('#name');var tel=$('#telephone');var email=$("#email");if(!name.val()){errors=true;name.addClass('error');}
if(!tel.val()){errors=true;tel.addClass('error');}
if(!email.val()){errors=true;email.addClass('error');}
if(!errors){$.blockUI({message:'<div class="blockui"><h2>Thank you for your patience<br/> your request is being processed...</h2><br/><img src="/images/ajax-loader.gif" /></div>',css:{backgroundColor:'transparent',color:'#fff',border:'none'}});return true;}
return false;};$(function(){$('input, textarea').placeholder();});$.fn.enterKey=function(fnc){return this.each(function(){$(this).keypress(function(ev){var keycode=(ev.keyCode?ev.keyCode:ev.which);if(keycode=='13'){fnc.call(this,ev);}});});};$(window).load(function(){function resizeUnits(){$('.wrapper-group-equalise').each(function(){var highestBoxPurple=0;var highestBoxGrey=0;$('.md-info-box-purple-equalise',this).each(function(){if($(this).height()>highestBoxPurple)
highestBoxPurple=$(this).height();});$('.md-info-box-purple-equalise',this).height(highestBoxPurple);$('.md-info-box-grey-equalise',this).each(function(){if($(this).height()>highestBoxGrey)
highestBoxGrey=$(this).height();});$('.md-info-box-grey-equalise',this).height(highestBoxGrey);});$('.twin-panel').each(function(){var highestBox=0;$('.twin-panel > .panel').each(function(){if($(this).height()>highestBox)
highestBox=$(this).height();});$('.twin-panel > .panel').height(highestBox);});}
resizeUnits();});$(document).ready(function(){$(window).scroll(function(){var $windowWidth=$(window).width();if($windowWidth>583){if($(this).scrollTop()>=280){$('#bookForm.new-bookForm-blue').addClass('new-bookForm-blue-landing-top');}else{$('#bookForm.new-bookForm-blue').removeClass('new-bookForm-blue-landing-top');}}});$(".acontainer").hide();$(".qcontainer").on('click',function(){$(".acontainer").slideUp();$(this).next().slideDown();});});function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+ name+"=([^&#]*)"),results=regex.exec(location.search);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "));}
function checkUKTelephone(telephoneNumber){var telnum=telephoneNumber+" ";if(telnum.length==1){telNumberErrorNo=1;return false;}
telnum.length=telnum.length- 1;var exp=/^(\+)[\s]*(.*)$/;if(exp.test(telnum)==true){telNumberErrorNo=2;return false;}
while(telnum.indexOf(" ")!=-1){telnum=telnum.slice(0,telnum.indexOf(" "))+ telnum.slice(telnum.indexOf(" ")+ 1);}
while(telnum.indexOf("-")!=-1){telnum=telnum.slice(0,telnum.indexOf("-"))+ telnum.slice(telnum.indexOf("-")+ 1);}
exp=/^[0-9]{10,11}$/;if(exp.test(telnum)!=true){telNumberErrorNo=3;return false;}
exp=/^0[0-9]{9,10}$/;if(exp.test(telnum)!=true){telNumberErrorNo=4;return false;}
var tnexp=new Array();tnexp.push(/^(0113|0114|0115|0116|0117|0118|0121|0131|0141|0151|0161)(4960)[0-9]{3}$/);tnexp.push(/^02079460[0-9]{3}$/);tnexp.push(/^01914980[0-9]{3}$/);tnexp.push(/^02890180[0-9]{3}$/);tnexp.push(/^02920180[0-9]{3}$/);tnexp.push(/^01632960[0-9]{3}$/);tnexp.push(/^07700900[0-9]{3}$/);tnexp.push(/^08081570[0-9]{3}$/);tnexp.push(/^09098790[0-9]{3}$/);tnexp.push(/^03069990[0-9]{3}$/);for(var i=0;i<tnexp.length;i++){if(tnexp[i].test(telnum)){telNumberErrorNo=5;return false;}}
epx=/^07/;if(exp.test(telnum)==true){if(telnum.length!=11){telNumberErrorNo=6;return false;}}
exp=(/^(01|02|03|05|070|071|072|073|074|075|07624|077|078|079)[0-9]+$/);if(exp.test(telnum)!=true){telNumberErrorNo=5;return false;}
return telnum;}
var telNumberErrorNo=0;var telNumberErrors=new Array();telNumberErrors[0]="Valid UK telephone number";telNumberErrors[1]="Please check telephone number not provided";telNumberErrors[2]="Number without the country code, please";telNumberErrors[3]="Please check numbers should contain 10 or 11 digits";telNumberErrors[4]="Please check number should start with a 0";telNumberErrors[5]="Please check telephone number is either invalid or inappropriate";telNumberErrors[6]="Please check mobile number should be 11 digits";var guid=(function(){function s4(){return Math.floor((1+ Math.random())*0x10000).toString(16).substring(1);}
return function(){return s4()+ s4()+'-'+ s4()+'-'+ s4()+'-'+
s4()+'-'+ s4()+ s4()+ s4();};})();function searchRedirect(e){var keyPressed;if(e!=null)
keyPressed=(window.event)?window.event.keyCode:e.which;if((e==null)||(keyPressed==13)){var searchUrl="/searchresults.aspx?SearchTerm="+ $("#searchBar").val()+"&SearchType=All";self.location=searchUrl;}}
$(document).ready(function(){$(".youtubeoverlay").colorbox({iframe:true,innerWidth:680,innerHeight:480,maxWidth:'100%',maxHeight:'70%'});$("[id$=btn_postcodeSearch]").click(function(){var query=$("[id$=tbx_postcodeSearch]").val();_gaq.push(['_trackEvent','PostcodeSearch',query]);return true;});$(".jobclick").click(function(){var query=$(this).data("name");_gaq.push(['_trackEvent','JobClick',query]);return true;});$(".watchvideo").click(function(){_gaq.push(['_trackEvent','WatchVideo','HomePage']);return true;});});$(document).keydown(function(event){var keycode=(event.keyCode?event.keyCode:event.which);if(keycode=='13'){if($("[id$=tbx_postcodeSearch]").is(":focus")){$("[id$=btn_postcodeSearch]").click();return false;}}
return true;});$(document).keydown(function(event){var keycode=(event.keyCode?event.keyCode:event.which);if(keycode=='13'){if($("[id$=name]").is(":focus")||$("[id$=postcode]").is(":focus")||$("[id$=telephone]").is(":focus")||$("[id$=leadtype]").is(":focus")||$("[id$=notes]").is(":focus")){$("[id$=but_Submit]").click();return false;}}
return true;});if(typeof window==="undefined"||window===null){window={twttr:{}};}
if(window.twttr==null){window.twttr={};}
if(typeof twttr==="undefined"||twttr===null){twttr={};}
(function(){twttr.txt={};twttr.txt.regexen={};var HTML_ENTITIES={'&':'&amp;','>':'&gt;','<':'&lt;','"':'&quot;',"'":'&#39;'};twttr.txt.htmlEscape=function(text){return text&&text.replace(/[&"'><]/g,function(character){return HTML_ENTITIES[character];});};function regexSupplant(regex,flags){flags=flags||"";if(typeof regex!=="string"){if(regex.global&&flags.indexOf("g")<0){flags+="g";}
if(regex.ignoreCase&&flags.indexOf("i")<0){flags+="i";}
if(regex.multiline&&flags.indexOf("m")<0){flags+="m";}
regex=regex.source;}
return new RegExp(regex.replace(/#\{(\w+)\}/g,function(match,name){var newRegex=twttr.txt.regexen[name]||"";if(typeof newRegex!=="string"){newRegex=newRegex.source;}
return newRegex;}),flags);}
twttr.txt.regexSupplant=regexSupplant;function stringSupplant(str,values){return str.replace(/#\{(\w+)\}/g,function(match,name){return values[name]||"";});}
twttr.txt.stringSupplant=stringSupplant;function addCharsToCharClass(charClass,start,end){var s=String.fromCharCode(start);if(end!==start){s+="-"+ String.fromCharCode(end);}
charClass.push(s);return charClass;}
twttr.txt.addCharsToCharClass=addCharsToCharClass;var fromCode=String.fromCharCode;var UNICODE_SPACES=[fromCode(0x0020),fromCode(0x0085),fromCode(0x00A0),fromCode(0x1680),fromCode(0x180E),fromCode(0x2028),fromCode(0x2029),fromCode(0x202F),fromCode(0x205F),fromCode(0x3000)];addCharsToCharClass(UNICODE_SPACES,0x009,0x00D);addCharsToCharClass(UNICODE_SPACES,0x2000,0x200A);var INVALID_CHARS=[fromCode(0xFFFE),fromCode(0xFEFF),fromCode(0xFFFF)];addCharsToCharClass(INVALID_CHARS,0x202A,0x202E);twttr.txt.regexen.spaces_group=regexSupplant(UNICODE_SPACES.join(""));twttr.txt.regexen.spaces=regexSupplant("["+ UNICODE_SPACES.join("")+"]");twttr.txt.regexen.invalid_chars_group=regexSupplant(INVALID_CHARS.join(""));twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;var nonLatinHashtagChars=[];addCharsToCharClass(nonLatinHashtagChars,0x0400,0x04ff);addCharsToCharClass(nonLatinHashtagChars,0x0500,0x0527);addCharsToCharClass(nonLatinHashtagChars,0x2de0,0x2dff);addCharsToCharClass(nonLatinHashtagChars,0xa640,0xa69f);addCharsToCharClass(nonLatinHashtagChars,0x0591,0x05bf);addCharsToCharClass(nonLatinHashtagChars,0x05c1,0x05c2);addCharsToCharClass(nonLatinHashtagChars,0x05c4,0x05c5);addCharsToCharClass(nonLatinHashtagChars,0x05c7,0x05c7);addCharsToCharClass(nonLatinHashtagChars,0x05d0,0x05ea);addCharsToCharClass(nonLatinHashtagChars,0x05f0,0x05f4);addCharsToCharClass(nonLatinHashtagChars,0xfb12,0xfb28);addCharsToCharClass(nonLatinHashtagChars,0xfb2a,0xfb36);addCharsToCharClass(nonLatinHashtagChars,0xfb38,0xfb3c);addCharsToCharClass(nonLatinHashtagChars,0xfb3e,0xfb3e);addCharsToCharClass(nonLatinHashtagChars,0xfb40,0xfb41);addCharsToCharClass(nonLatinHashtagChars,0xfb43,0xfb44);addCharsToCharClass(nonLatinHashtagChars,0xfb46,0xfb4f);addCharsToCharClass(nonLatinHashtagChars,0x0610,0x061a);addCharsToCharClass(nonLatinHashtagChars,0x0620,0x065f);addCharsToCharClass(nonLatinHashtagChars,0x066e,0x06d3);addCharsToCharClass(nonLatinHashtagChars,0x06d5,0x06dc);addCharsToCharClass(nonLatinHashtagChars,0x06de,0x06e8);addCharsToCharClass(nonLatinHashtagChars,0x06ea,0x06ef);addCharsToCharClass(nonLatinHashtagChars,0x06fa,0x06fc);addCharsToCharClass(nonLatinHashtagChars,0x06ff,0x06ff);addCharsToCharClass(nonLatinHashtagChars,0x0750,0x077f);addCharsToCharClass(nonLatinHashtagChars,0x08a0,0x08a0);addCharsToCharClass(nonLatinHashtagChars,0x08a2,0x08ac);addCharsToCharClass(nonLatinHashtagChars,0x08e4,0x08fe);addCharsToCharClass(nonLatinHashtagChars,0xfb50,0xfbb1);addCharsToCharClass(nonLatinHashtagChars,0xfbd3,0xfd3d);addCharsToCharClass(nonLatinHashtagChars,0xfd50,0xfd8f);addCharsToCharClass(nonLatinHashtagChars,0xfd92,0xfdc7);addCharsToCharClass(nonLatinHashtagChars,0xfdf0,0xfdfb);addCharsToCharClass(nonLatinHashtagChars,0xfe70,0xfe74);addCharsToCharClass(nonLatinHashtagChars,0xfe76,0xfefc);addCharsToCharClass(nonLatinHashtagChars,0x200c,0x200c);addCharsToCharClass(nonLatinHashtagChars,0x0e01,0x0e3a);addCharsToCharClass(nonLatinHashtagChars,0x0e40,0x0e4e);addCharsToCharClass(nonLatinHashtagChars,0x1100,0x11ff);addCharsToCharClass(nonLatinHashtagChars,0x3130,0x3185);addCharsToCharClass(nonLatinHashtagChars,0xA960,0xA97F);addCharsToCharClass(nonLatinHashtagChars,0xAC00,0xD7AF);addCharsToCharClass(nonLatinHashtagChars,0xD7B0,0xD7FF);addCharsToCharClass(nonLatinHashtagChars,0xFFA1,0xFFDC);addCharsToCharClass(nonLatinHashtagChars,0x30A1,0x30FA);addCharsToCharClass(nonLatinHashtagChars,0x30FC,0x30FE);addCharsToCharClass(nonLatinHashtagChars,0xFF66,0xFF9F);addCharsToCharClass(nonLatinHashtagChars,0xFF70,0xFF70);addCharsToCharClass(nonLatinHashtagChars,0xFF10,0xFF19);addCharsToCharClass(nonLatinHashtagChars,0xFF21,0xFF3A);addCharsToCharClass(nonLatinHashtagChars,0xFF41,0xFF5A);addCharsToCharClass(nonLatinHashtagChars,0x3041,0x3096);addCharsToCharClass(nonLatinHashtagChars,0x3099,0x309E);addCharsToCharClass(nonLatinHashtagChars,0x3400,0x4DBF);addCharsToCharClass(nonLatinHashtagChars,0x4E00,0x9FFF);addCharsToCharClass(nonLatinHashtagChars,0x2A700,0x2B73F);addCharsToCharClass(nonLatinHashtagChars,0x2B740,0x2B81F);addCharsToCharClass(nonLatinHashtagChars,0x2F800,0x2FA1F);addCharsToCharClass(nonLatinHashtagChars,0x3003,0x3003);addCharsToCharClass(nonLatinHashtagChars,0x3005,0x3005);addCharsToCharClass(nonLatinHashtagChars,0x303B,0x303B);twttr.txt.regexen.nonLatinHashtagChars=regexSupplant(nonLatinHashtagChars.join(""));var latinAccentChars=[];addCharsToCharClass(latinAccentChars,0x00c0,0x00d6);addCharsToCharClass(latinAccentChars,0x00d8,0x00f6);addCharsToCharClass(latinAccentChars,0x00f8,0x00ff);addCharsToCharClass(latinAccentChars,0x0100,0x024f);addCharsToCharClass(latinAccentChars,0x0253,0x0254);addCharsToCharClass(latinAccentChars,0x0256,0x0257);addCharsToCharClass(latinAccentChars,0x0259,0x0259);addCharsToCharClass(latinAccentChars,0x025b,0x025b);addCharsToCharClass(latinAccentChars,0x0263,0x0263);addCharsToCharClass(latinAccentChars,0x0268,0x0268);addCharsToCharClass(latinAccentChars,0x026f,0x026f);addCharsToCharClass(latinAccentChars,0x0272,0x0272);addCharsToCharClass(latinAccentChars,0x0289,0x0289);addCharsToCharClass(latinAccentChars,0x028b,0x028b);addCharsToCharClass(latinAccentChars,0x02bb,0x02bb);addCharsToCharClass(latinAccentChars,0x0300,0x036f);addCharsToCharClass(latinAccentChars,0x1e00,0x1eff);twttr.txt.regexen.latinAccentChars=regexSupplant(latinAccentChars.join(""));twttr.txt.regexen.hashSigns=/[#]/;twttr.txt.regexen.hashtagAlpha=regexSupplant(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.hashtagAlphaNumeric=regexSupplant(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.endHashtagMatch=regexSupplant(/^(?:#{hashSigns}|:\/\/)/);twttr.txt.regexen.hashtagBoundary=regexSupplant(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);twttr.txt.regexen.validHashtag=regexSupplant(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@]|RT:?)/;twttr.txt.regexen.atSigns=/[@]/;twttr.txt.regexen.validMentionOrList=regexSupplant('(#{validMentionPrecedingChars})'+'(#{atSigns})'+'([a-zA-Z0-9_]{1,20})'+'(\/[a-zA-Z][a-zA-Z0-9_\-]{0,24})?','g');twttr.txt.regexen.validReply=regexSupplant(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);twttr.txt.regexen.endMentionMatch=regexSupplant(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);twttr.txt.regexen.validUrlPrecedingChars=regexSupplant(/(?:[^A-Za-z0-9@$##{invalid_chars_group}]|^)/);twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;twttr.txt.regexen.invalidDomainChars=stringSupplant("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen);twttr.txt.regexen.validDomainChars=regexSupplant(/[^#{invalidDomainChars}]/);twttr.txt.regexen.validSubdomain=regexSupplant(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validDomainName=regexSupplant(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validGTLD=regexSupplant(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validCCTLD=regexSupplant(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validPunycode=regexSupplant(/(?:xn--[0-9a-z]+)/);twttr.txt.regexen.validDomain=regexSupplant(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);twttr.txt.regexen.validAsciiDomain=regexSupplant(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);twttr.txt.regexen.invalidShortDomain=regexSupplant(/^#{validDomainName}#{validCCTLD}$/);twttr.txt.regexen.validPortNumber=regexSupplant(/[0-9]+/);twttr.txt.regexen.validGeneralUrlPathChars=regexSupplant(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i);twttr.txt.regexen.validUrlBalancedParens=regexSupplant(/\(#{validGeneralUrlPathChars}+\)/i);twttr.txt.regexen.validUrlPathEndingChars=regexSupplant(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);twttr.txt.regexen.validUrlPath=regexSupplant('(?:'+'(?:'+'#{validGeneralUrlPathChars}*'+'(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*'+'#{validUrlPathEndingChars}'+')|(?:@#{validGeneralUrlPathChars}+\/)'+')','i');twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;twttr.txt.regexen.extractUrl=regexSupplant('('+'(#{validUrlPrecedingChars})'+'('+'(https?:\\/\\/)?'+'(#{validDomain})'+'(?::(#{validPortNumber}))?'+'(\\/#{validUrlPath}*)?'+'(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?'+')'+')','gi');twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;twttr.txt.regexen.validCashtag=regexSupplant('(?:^|#{spaces})\\$(#{cashtag})(?=$|\\s|[#{punct}])','gi');twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;twttr.txt.regexen.validateUrlPchar=regexSupplant('(?:'+'#{validateUrlUnreserved}|'+'#{validateUrlPctEncoded}|'+'#{validateUrlSubDelims}|'+'[:|@]'+')','i');twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;twttr.txt.regexen.validateUrlUserinfo=regexSupplant('(?:'+'#{validateUrlUnreserved}|'+'#{validateUrlPctEncoded}|'+'#{validateUrlSubDelims}|'+':'+')*','i');twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;twttr.txt.regexen.validateUrlIpv4=regexSupplant(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;twttr.txt.regexen.validateUrlIp=regexSupplant('(?:'+'#{validateUrlIpv4}|'+'#{validateUrlIpv6}'+')','i');twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomain=regexSupplant(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);twttr.txt.regexen.validateUrlHost=regexSupplant('(?:'+'#{validateUrlIp}|'+'#{validateUrlDomain}'+')','i');twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomain=regexSupplant(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);twttr.txt.regexen.validateUrlUnicodeHost=regexSupplant('(?:'+'#{validateUrlIp}|'+'#{validateUrlUnicodeDomain}'+')','i');twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/;twttr.txt.regexen.validateUrlUnicodeAuthority=regexSupplant('(?:(#{validateUrlUserinfo})@)?'+'(#{validateUrlUnicodeHost})'+'(?::(#{validateUrlPort}))?',"i");twttr.txt.regexen.validateUrlAuthority=regexSupplant('(?:(#{validateUrlUserinfo})@)?'+'(#{validateUrlHost})'+'(?::(#{validateUrlPort}))?',"i");twttr.txt.regexen.validateUrlPath=regexSupplant(/(\/#{validateUrlPchar}*)*/i);twttr.txt.regexen.validateUrlQuery=regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlFragment=regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlUnencoded=regexSupplant('^'+'(?:'+'([^:/?#]+):\\/\\/'+')?'+'([^/?#]*)'+'([^?#]*)'+'(?:'+'\\?([^#]*)'+')?'+'(?:'+'#(.*)'+')?$',"i");var DEFAULT_LIST_CLASS="tweet-url list-slug";var DEFAULT_USERNAME_CLASS="tweet-url username";var DEFAULT_HASHTAG_CLASS="tweet-url hashtag";var DEFAULT_CASHTAG_CLASS="tweet-url cashtag";var OPTIONS_NOT_ATTRIBUTES={'urlClass':true,'listClass':true,'usernameClass':true,'hashtagClass':true,'cashtagClass':true,'usernameUrlBase':true,'listUrlBase':true,'hashtagUrlBase':true,'cashtagUrlBase':true,'usernameUrlBlock':true,'listUrlBlock':true,'hashtagUrlBlock':true,'linkUrlBlock':true,'usernameIncludeSymbol':true,'suppressLists':true,'suppressNoFollow':true,'suppressDataScreenName':true,'urlEntities':true,'symbolTag':true,'textWithSymbolTag':true,'urlTarget':true,'invisibleTagAttrs':true,'linkAttributeBlock':true,'linkTextBlock':true};var BOOLEAN_ATTRIBUTES={'disabled':true,'readonly':true,'multiple':true,'checked':true};function clone(o){var r={};for(var k in o){if(o.hasOwnProperty(k)){r[k]=o[k];}}
return r;}
twttr.txt.tagAttrs=function(attributes){var htmlAttrs="";for(var k in attributes){var v=attributes[k];if(BOOLEAN_ATTRIBUTES[k]){v=v?k:null;}
if(v==null)continue;htmlAttrs+=" "+ twttr.txt.htmlEscape(k)+"=\""+ twttr.txt.htmlEscape(v.toString())+"\"";}
return htmlAttrs;};twttr.txt.linkToText=function(entity,text,attributes,options){if(!options.suppressNoFollow){attributes.rel="nofollow";}
if(options.linkAttributeBlock){options.linkAttributeBlock(entity,attributes);}
if(options.linkTextBlock){text=options.linkTextBlock(entity,text);}
var d={text:text,attr:twttr.txt.tagAttrs(attributes)};return stringSupplant("<a#{attr}>#{text}</a>",d);};twttr.txt.linkToTextWithSymbol=function(entity,symbol,text,attributes,options){var taggedSymbol=options.symbolTag?"<"+ options.symbolTag+">"+ symbol+"</"+ options.symbolTag+">":symbol;text=twttr.txt.htmlEscape(text);var taggedText=options.textWithSymbolTag?"<"+ options.textWithSymbolTag+">"+ text+"</"+ options.textWithSymbolTag+">":text;if(options.usernameIncludeSymbol||!symbol.match(twttr.txt.regexen.atSigns)){return twttr.txt.linkToText(entity,taggedSymbol+ taggedText,attributes,options);}else{return taggedSymbol+ twttr.txt.linkToText(entity,taggedText,attributes,options);}};twttr.txt.linkToHashtag=function(entity,text,options){var hash=text.substring(entity.indices[0],entity.indices[0]+ 1);var hashtag=twttr.txt.htmlEscape(entity.hashtag);var attrs=clone(options.htmlAttrs||{});attrs.href=options.hashtagUrlBase+ hashtag;attrs.title="#"+ hashtag;attrs["class"]=options.hashtagClass;return twttr.txt.linkToTextWithSymbol(entity,hash,hashtag,attrs,options);};twttr.txt.linkToCashtag=function(entity,text,options){var cashtag=twttr.txt.htmlEscape(entity.cashtag);var attrs=clone(options.htmlAttrs||{});attrs.href=options.cashtagUrlBase+ cashtag;attrs.title="$"+ cashtag;attrs["class"]=options.cashtagClass;return twttr.txt.linkToTextWithSymbol(entity,"$",cashtag,attrs,options);};twttr.txt.linkToMentionAndList=function(entity,text,options){var at=text.substring(entity.indices[0],entity.indices[0]+ 1);var user=twttr.txt.htmlEscape(entity.screenName);var slashListname=twttr.txt.htmlEscape(entity.listSlug);var isList=entity.listSlug&&!options.suppressLists;var attrs=clone(options.htmlAttrs||{});attrs["class"]=(isList?options.listClass:options.usernameClass);attrs.href=isList?options.listUrlBase+ user+ slashListname:options.usernameUrlBase+ user;if(!isList&&!options.suppressDataScreenName){attrs['data-screen-name']=user;}
return twttr.txt.linkToTextWithSymbol(entity,at,isList?user+ slashListname:user,attrs,options);};twttr.txt.linkToUrl=function(entity,text,options){var url=entity.url;var displayUrl=url;var linkText=twttr.txt.htmlEscape(displayUrl);var urlEntity=(options.urlEntities&&options.urlEntities[url])||entity;if(urlEntity.display_url){linkText=twttr.txt.linkTextWithEntity(urlEntity,options);}
var attrs=clone(options.htmlAttrs||{});attrs.href=url;if(options.urlClass){attrs["class"]=options.urlClass;}
if(options.urlTarget){attrs.target=options.urlTarget;}
if(!options.title&&urlEntity.display_url){attrs.title=urlEntity.expanded_url;}
return twttr.txt.linkToText(entity,linkText,attrs,options);};twttr.txt.linkTextWithEntity=function(entity,options){var displayUrl=entity.display_url;var expandedUrl=entity.expanded_url;var displayUrlSansEllipses=displayUrl.replace(//g,"");if(expandedUrl.indexOf(displayUrlSansEllipses)!=-1){var displayUrlIndex=expandedUrl.indexOf(displayUrlSansEllipses);var v={displayUrlSansEllipses:displayUrlSansEllipses,beforeDisplayUrl:expandedUrl.substr(0,displayUrlIndex),afterDisplayUrl:expandedUrl.substr(displayUrlIndex+ displayUrlSansEllipses.length),precedingEllipsis:displayUrl.match(/^/)?"":"",followingEllipsis:displayUrl.match(/$/)?"":""};for(var k in v){if(v.hasOwnProperty(k)){v[k]=twttr.txt.htmlEscape(v[k]);}}
v['invisible']=options.invisibleTagAttrs;return stringSupplant("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",v);}
return displayUrl;};twttr.txt.autoLinkEntities=function(text,entities,options){options=clone(options||{});options.hashtagClass=options.hashtagClass||DEFAULT_HASHTAG_CLASS;options.hashtagUrlBase=options.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";options.cashtagClass=options.cashtagClass||DEFAULT_CASHTAG_CLASS;options.cashtagUrlBase=options.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";options.listClass=options.listClass||DEFAULT_LIST_CLASS;options.usernameClass=options.usernameClass||DEFAULT_USERNAME_CLASS;options.usernameUrlBase=options.usernameUrlBase||"https://twitter.com/";options.listUrlBase=options.listUrlBase||"https://twitter.com/";options.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(options);options.invisibleTagAttrs=options.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var urlEntities,i,len;if(options.urlEntities){urlEntities={};for(i=0,len=options.urlEntities.length;i<len;i++){urlEntities[options.urlEntities[i].url]=options.urlEntities[i];}
options.urlEntities=urlEntities;}
var result="";var beginIndex=0;entities.sort(function(a,b){return a.indices[0]- b.indices[0];});for(var i=0;i<entities.length;i++){var entity=entities[i];result+=text.substring(beginIndex,entity.indices[0]);if(entity.url){result+=twttr.txt.linkToUrl(entity,text,options);}else if(entity.hashtag){result+=twttr.txt.linkToHashtag(entity,text,options);}else if(entity.screenName){result+=twttr.txt.linkToMentionAndList(entity,text,options);}else if(entity.cashtag){result+=twttr.txt.linkToCashtag(entity,text,options);}
beginIndex=entity.indices[1];}
result+=text.substring(beginIndex,text.length);return result;};twttr.txt.autoLinkWithJSON=function(text,json,options){var entities=[];for(var key in json){entities=entities.concat(json[key]);}
for(var i=0;i<entities.length;i++){entity=entities[i];if(entity.screen_name){entity.screenName=entity.screen_name;}else if(entity.text){entity.hashtag=entity.text;}}
twttr.txt.modifyIndicesFromUnicodeToUTF16(text,entities);return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.extractHtmlAttrsFromOptions=function(options){var htmlAttrs={};for(var k in options){var v=options[k];if(OPTIONS_NOT_ATTRIBUTES[k])continue;if(BOOLEAN_ATTRIBUTES[k]){v=v?k:null;}
if(v==null)continue;htmlAttrs[k]=v;}
return htmlAttrs;};twttr.txt.autoLink=function(text,options){var entities=twttr.txt.extractEntitiesWithIndices(text,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.autoLinkUsernamesOrLists=function(text,options){var entities=twttr.txt.extractMentionsOrListsWithIndices(text);return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.autoLinkHashtags=function(text,options){var entities=twttr.txt.extractHashtagsWithIndices(text);return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.autoLinkCashtags=function(text,options){var entities=twttr.txt.extractCashtagsWithIndices(text);return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.autoLinkUrlsCustom=function(text,options){var entities=twttr.txt.extractUrlsWithIndices(text,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(text,entities,options);};twttr.txt.removeOverlappingEntities=function(entities){entities.sort(function(a,b){return a.indices[0]- b.indices[0];});var prev=entities[0];for(var i=1;i<entities.length;i++){if(prev.indices[1]>entities[i].indices[0]){entities.splice(i,1);i--;}else{prev=entities[i];}}};twttr.txt.extractEntitiesWithIndices=function(text,options){var entities=twttr.txt.extractUrlsWithIndices(text,options).concat(twttr.txt.extractMentionsOrListsWithIndices(text)).concat(twttr.txt.extractHashtagsWithIndices(text,{checkUrlOverlap:false})).concat(twttr.txt.extractCashtagsWithIndices(text));if(entities.length==0){return[];}
twttr.txt.removeOverlappingEntities(entities);return entities;};twttr.txt.extractMentions=function(text){var screenNamesOnly=[],screenNamesWithIndices=twttr.txt.extractMentionsWithIndices(text);for(var i=0;i<screenNamesWithIndices.length;i++){var screenName=screenNamesWithIndices[i].screenName;screenNamesOnly.push(screenName);}
return screenNamesOnly;};twttr.txt.extractMentionsWithIndices=function(text){var mentions=[];var mentionsOrLists=twttr.txt.extractMentionsOrListsWithIndices(text);for(var i=0;i<mentionsOrLists.length;i++){mentionOrList=mentionsOrLists[i];if(mentionOrList.listSlug==''){mentions.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices});}}
return mentions;};twttr.txt.extractMentionsOrListsWithIndices=function(text){if(!text||!text.match(twttr.txt.regexen.atSigns)){return[];}
var possibleNames=[],position=0;text.replace(twttr.txt.regexen.validMentionOrList,function(match,before,atSign,screenName,slashListname,offset,chunk){var after=chunk.slice(offset+ match.length);if(!after.match(twttr.txt.regexen.endMentionMatch)){slashListname=slashListname||'';var startPosition=text.indexOf(atSign+ screenName+ slashListname,position);position=startPosition+ screenName.length+ slashListname.length+ 1;possibleNames.push({screenName:screenName,listSlug:slashListname,indices:[startPosition,position]});}});return possibleNames;};twttr.txt.extractReplies=function(text){if(!text){return null;}
var possibleScreenName=text.match(twttr.txt.regexen.validReply);if(!possibleScreenName||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)){return null;}
return possibleScreenName[1];};twttr.txt.extractUrls=function(text,options){var urlsOnly=[],urlsWithIndices=twttr.txt.extractUrlsWithIndices(text,options);for(var i=0;i<urlsWithIndices.length;i++){urlsOnly.push(urlsWithIndices[i].url);}
return urlsOnly;};twttr.txt.extractUrlsWithIndices=function(text,options){if(!options){options={extractUrlsWithoutProtocol:true};}
if(!text||(options.extractUrlsWithoutProtocol?!text.match(/\./):!text.match(/:/))){return[];}
var urls=[];while(twttr.txt.regexen.extractUrl.exec(text)){var before=RegExp.$2,url=RegExp.$3,protocol=RegExp.$4,domain=RegExp.$5,path=RegExp.$7;var endPosition=twttr.txt.regexen.extractUrl.lastIndex,startPosition=endPosition- url.length;if(!protocol){if(!options.extractUrlsWithoutProtocol||before.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){continue;}
var lastUrl=null,lastUrlInvalidMatch=false,asciiEndPosition=0;domain.replace(twttr.txt.regexen.validAsciiDomain,function(asciiDomain){var asciiStartPosition=domain.indexOf(asciiDomain,asciiEndPosition);asciiEndPosition=asciiStartPosition+ asciiDomain.length;lastUrl={url:asciiDomain,indices:[startPosition+ asciiStartPosition,startPosition+ asciiEndPosition]};lastUrlInvalidMatch=asciiDomain.match(twttr.txt.regexen.invalidShortDomain);if(!lastUrlInvalidMatch){urls.push(lastUrl);}});if(lastUrl==null){continue;}
if(path){if(lastUrlInvalidMatch){urls.push(lastUrl);}
lastUrl.url=url.replace(domain,lastUrl.url);lastUrl.indices[1]=endPosition;}}else{if(url.match(twttr.txt.regexen.validTcoUrl)){url=RegExp.lastMatch;endPosition=startPosition+ url.length;}
urls.push({url:url,indices:[startPosition,endPosition]});}}
return urls;};twttr.txt.extractHashtags=function(text){var hashtagsOnly=[],hashtagsWithIndices=twttr.txt.extractHashtagsWithIndices(text);for(var i=0;i<hashtagsWithIndices.length;i++){hashtagsOnly.push(hashtagsWithIndices[i].hashtag);}
return hashtagsOnly;};twttr.txt.extractHashtagsWithIndices=function(text,options){if(!options){options={checkUrlOverlap:true};}
if(!text||!text.match(twttr.txt.regexen.hashSigns)){return[];}
var tags=[],position=0;text.replace(twttr.txt.regexen.validHashtag,function(match,before,hash,hashText,offset,chunk){var after=chunk.slice(offset+ match.length);if(after.match(twttr.txt.regexen.endHashtagMatch))
return;var startPosition=text.indexOf(hash+ hashText,position);position=startPosition+ hashText.length+ 1;tags.push({hashtag:hashText,indices:[startPosition,position]});});if(options.checkUrlOverlap){var urls=twttr.txt.extractUrlsWithIndices(text);if(urls.length>0){var entities=tags.concat(urls);twttr.txt.removeOverlappingEntities(entities);tags=[];for(var i=0;i<entities.length;i++){if(entities[i].hashtag){tags.push(entities[i]);}}}}
return tags;};twttr.txt.extractCashtags=function(text){var cashtagsOnly=[],cashtagsWithIndices=twttr.txt.extractCashtagsWithIndices(text);for(var i=0;i<cashtagsWithIndices.length;i++){cashtagsOnly.push(cashtagsWithIndices[i].cashtag);}
return cashtagsOnly;};twttr.txt.extractCashtagsWithIndices=function(text){if(!text||text.indexOf("$")==-1){return[];}
var tags=[],position=0;text.replace(twttr.txt.regexen.validCashtag,function(match,cashtag,offset,chunk){var startPosition=text.indexOf(cashtag,position)- 1;position=startPosition+ cashtag.length+ 1;tags.push({cashtag:cashtag,indices:[startPosition,position]});});return tags;};twttr.txt.modifyIndicesFromUnicodeToUTF16=function(text,entities){twttr.txt.convertUnicodeIndices(text,entities,false);};twttr.txt.modifyIndicesFromUTF16ToUnicode=function(text,entities){twttr.txt.convertUnicodeIndices(text,entities,true);};twttr.txt.convertUnicodeIndices=function(text,entities,indicesInUTF16){if(entities.length==0){return;}
var charIndex=0;var codePointIndex=0;entities.sort(function(a,b){return a.indices[0]- b.indices[0];});var entityIndex=0;var entity=entities[0];while(charIndex<text.length){if(entity.indices[0]==(indicesInUTF16?charIndex:codePointIndex)){var len=entity.indices[1]- entity.indices[0];entity.indices[0]=indicesInUTF16?codePointIndex:charIndex;entity.indices[1]=entity.indices[0]+ len;entityIndex++;if(entityIndex==entities.length){break;}
entity=entities[entityIndex];}
var c=text.charCodeAt(charIndex);if(0xD800<=c&&c<=0xDBFF&&charIndex<text.length- 1){c=text.charCodeAt(charIndex+ 1);if(0xDC00<=c&&c<=0xDFFF){charIndex++;}}
codePointIndex++;charIndex++;}};twttr.txt.splitTags=function(text){var firstSplits=text.split("<"),secondSplits,allSplits=[],split;for(var i=0;i<firstSplits.length;i+=1){split=firstSplits[i];if(!split){allSplits.push("");}else{secondSplits=split.split(">");for(var j=0;j<secondSplits.length;j+=1){allSplits.push(secondSplits[j]);}}}
return allSplits;};twttr.txt.hitHighlight=function(text,hits,options){var defaultHighlightTag="em";hits=hits||[];options=options||{};if(hits.length===0){return text;}
var tagName=options.tag||defaultHighlightTag,tags=["<"+ tagName+">","</"+ tagName+">"],chunks=twttr.txt.splitTags(text),i,j,result="",chunkIndex=0,chunk=chunks[0],prevChunksLen=0,chunkCursor=0,startInChunk=false,chunkChars=chunk,flatHits=[],index,hit,tag,placed,hitSpot;for(i=0;i<hits.length;i+=1){for(j=0;j<hits[i].length;j+=1){flatHits.push(hits[i][j]);}}
for(index=0;index<flatHits.length;index+=1){hit=flatHits[index];tag=tags[index%2];placed=false;while(chunk!=null&&hit>=prevChunksLen+ chunk.length){result+=chunkChars.slice(chunkCursor);if(startInChunk&&hit===prevChunksLen+ chunkChars.length){result+=tag;placed=true;}
if(chunks[chunkIndex+ 1]){result+="<"+ chunks[chunkIndex+ 1]+">";}
prevChunksLen+=chunkChars.length;chunkCursor=0;chunkIndex+=2;chunk=chunks[chunkIndex];chunkChars=chunk;startInChunk=false;}
if(!placed&&chunk!=null){hitSpot=hit- prevChunksLen;result+=chunkChars.slice(chunkCursor,hitSpot)+ tag;chunkCursor=hitSpot;if(index%2===0){startInChunk=true;}else{startInChunk=false;}}else if(!placed){placed=true;result+=tag;}}
if(chunk!=null){if(chunkCursor<chunkChars.length){result+=chunkChars.slice(chunkCursor);}
for(index=chunkIndex+ 1;index<chunks.length;index+=1){result+=(index%2===0?chunks[index]:"<"+ chunks[index]+">");}}
return result;};var MAX_LENGTH=140;var INVALID_CHARACTERS=[fromCode(0xFFFE),fromCode(0xFEFF),fromCode(0xFFFF),fromCode(0x202A),fromCode(0x202B),fromCode(0x202C),fromCode(0x202D),fromCode(0x202E)];twttr.txt.getTweetLength=function(text,options){if(!options){options={short_url_length:20,short_url_length_https:21};}
var textLength=text.length;var urlsWithIndices=twttr.txt.extractUrlsWithIndices(text);for(var i=0;i<urlsWithIndices.length;i++){textLength+=urlsWithIndices[i].indices[0]- urlsWithIndices[i].indices[1];if(urlsWithIndices[i].url.toLowerCase().match(/^https:\/\//)){textLength+=options.short_url_length_https;}else{textLength+=options.short_url_length;}}
return textLength;};twttr.txt.isInvalidTweet=function(text){if(!text){return"empty";}
if(twttr.txt.getTweetLength(text)>MAX_LENGTH){return"too_long";}
for(var i=0;i<INVALID_CHARACTERS.length;i++){if(text.indexOf(INVALID_CHARACTERS[i])>=0){return"invalid_characters";}}
return false;};twttr.txt.isValidTweetText=function(text){return!twttr.txt.isInvalidTweet(text);};twttr.txt.isValidUsername=function(username){if(!username){return false;}
var extracted=twttr.txt.extractMentions(username);return extracted.length===1&&extracted[0]===username.slice(1);};var VALID_LIST_RE=regexSupplant(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(usernameList){var match=usernameList.match(VALID_LIST_RE);return!!(match&&match[1]==""&&match[4]);};twttr.txt.isValidHashtag=function(hashtag){if(!hashtag){return false;}
var extracted=twttr.txt.extractHashtags(hashtag);return extracted.length===1&&extracted[0]===hashtag.slice(1);};twttr.txt.isValidUrl=function(url,unicodeDomains,requireProtocol){if(unicodeDomains==null){unicodeDomains=true;}
if(requireProtocol==null){requireProtocol=true;}
if(!url){return false;}
var urlParts=url.match(twttr.txt.regexen.validateUrlUnencoded);if(!urlParts||urlParts[0]!==url){return false;}
var scheme=urlParts[1],authority=urlParts[2],path=urlParts[3],query=urlParts[4],fragment=urlParts[5];if(!((!requireProtocol||(isValidMatch(scheme,twttr.txt.regexen.validateUrlScheme)&&scheme.match(/^https?$/i)))&&isValidMatch(path,twttr.txt.regexen.validateUrlPath)&&isValidMatch(query,twttr.txt.regexen.validateUrlQuery,true)&&isValidMatch(fragment,twttr.txt.regexen.validateUrlFragment,true))){return false;}
return(unicodeDomains&&isValidMatch(authority,twttr.txt.regexen.validateUrlUnicodeAuthority))||(!unicodeDomains&&isValidMatch(authority,twttr.txt.regexen.validateUrlAuthority));};function isValidMatch(string,regex,optional){if(!optional){return((typeof string==="string")&&string.match(regex)&&RegExp["$&"]===string);}
return(!string||(string.match(regex)&&RegExp["$&"]===string));}
if(typeof module!='undefined'&&module.exports){module.exports=twttr.txt;}}());